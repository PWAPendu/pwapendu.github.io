(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[680],{2680:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>le});var s=a(9835),i=a(6970),o=a(8290),l=a.n(o);const r={key:0},n={class:"row justify-center items-center q-ma-sm"},p={class:"col-4"},m={class:"col text-center"},c={class:"text-bold q-ma-none q-pa-none text-accent text-h6"},d={class:"text-bold q-ma-none q-pa-none text-grey"},u={class:"col"},h={class:"q-ml-md"},q={class:"row items-center"},g=(0,s._)("p",{class:"text-accent text-bold q-ma-none q-pa-none",style:{"font-size":"16px"}}," Créateur ",-1),w={class:"row justify-center items-center"},y={class:"col"},b={key:0,style:{"font-size":"15px"},class:"q-ml-md"},f={class:"col-4"},_={key:0,style:{"font-size":"15px"},class:"q-ml-md"},v={key:0},x={key:0,class:"row items-center justify-center"},k=(0,s._)("p",{class:"text-center text-grey q-ma-none q-pa-none q-mr-sm"}," En attente de joueur supplémentaire... ",-1),W={key:1,class:"row items-center justify-center"},j=(0,s._)("p",{class:"text-center text-grey q-ma-none q-pa-none q-mr-sm"}," Tous les joueurs sont présent ",-1),C=(0,s._)("img",{src:"https://cdn.quasar.dev/img/avatar.png"},null,-1),z={class:"q-ma-none q-pa-none q-ml-sm"},V={style:{width:"100%"},class:"row justify-end"},Z=(0,s._)("div",{class:"text-h6"},"Paramètres",-1),Q={class:"q-ma-sm"},S=(0,s._)("p",{class:"text-bold text-accent q-pa-nonr q-ma-none"}," Configuration de la partie ",-1),P={class:"q-ma-md q-mt-xl"},$=(0,s._)("p",{class:"text-bold text-accent q-pa-nonr q-ma-none"}," Configuration du jeu ",-1),D={class:"row justify-center q-mb-sm"};function U(e,t,a,o,U,E){const I=(0,s.up)("q-img"),J=(0,s.up)("q-btn"),M=(0,s.up)("q-spinner-orbit"),O=(0,s.up)("q-icon"),T=(0,s.up)("q-avatar"),A=(0,s.up)("q-card-section"),N=(0,s.up)("q-card"),B=(0,s.up)("q-space"),F=(0,s.up)("q-input"),H=(0,s.up)("q-form"),K=(0,s.up)("q-dialog"),L=(0,s.up)("q-page-sticky"),R=(0,s.up)("q-page"),Y=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(R,null,{default:(0,s.w5)((()=>[U.partie?((0,s.wg)(),(0,s.iD)("main",r,[(0,s._)("div",n,[(0,s._)("div",p,[(0,s.Wm)(I,{src:l()})]),(0,s._)("div",m,[(0,s._)("p",c,(0,i.zw)(U.partie.nom),1),(0,s._)("p",d,"#"+(0,i.zw)(U.partie.code),1)]),(0,s._)("div",u,[(0,s.Wm)(J,{onClick:E.leave,color:"secondary","no-caps":"",label:"Quitter",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["onClick"])])]),(0,s._)("div",h,[(0,s._)("div",q,[g,(0,s.Wm)(J,{onClick:t[0]||(t[0]=e=>U.partieSettings=!0),round:"",class:"q-ml-sm",icon:"settings",size:"15px",color:"accent",flat:""})]),(0,s._)("div",w,[(0,s._)("div",y,[U.user?((0,s.wg)(),(0,s.iD)("p",b,(0,i.zw)(U.user.pseudo)+" (vous) ",1)):(0,s.kq)("",!0)]),(0,s._)("div",f,[U.partie?((0,s.wg)(),(0,s.iD)("p",_,(0,i.zw)(U.partie.joueurs.length)+"/"+(0,i.zw)(U.partie.max)+" joueurs ",1)):(0,s.kq)("",!0)])])]),U.partie?((0,s.wg)(),(0,s.iD)("div",v,[U.partie.max!=U.partie.joueurs.length?((0,s.wg)(),(0,s.iD)("div",x,[k,(0,s.Wm)(M,{color:"grey",size:"2em"})])):((0,s.wg)(),(0,s.iD)("div",W,[j,(0,s.Wm)(O,{name:"done"})])),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(U.partie.joueurs,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"q-ma-md",key:t},[(0,s.Wm)(N,{class:"q-mb-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(A,{horizontal:""},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{size:"80px"},{default:(0,s.w5)((()=>[C])),_:1}),(0,s._)("h6",z,(0,i.zw)(e.pseudo),1),(0,s._)("div",V,[(0,s.Wm)(J,{onClick:e=>E.kickJoueur(t),icon:"close",flat:"",color:"negative"},null,8,["onClick"])])])),_:2},1024)])),_:2},1024)])))),128))])):(0,s.kq)("",!0),U.partie?((0,s.wg)(),(0,s.j4)(K,{key:1,persistent:"","full-width":"",modelValue:U.partieSettings,"onUpdate:modelValue":t[5]||(t[5]=e=>U.partieSettings=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(N,null,{default:(0,s.w5)((()=>[(0,s.Wm)(A,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(O,{class:"q-mr-sm",size:"15px",name:"settings",color:"accent"}),Z,(0,s.Wm)(B),(0,s.wy)((0,s.Wm)(J,{icon:"close",flat:"",round:"",dense:""},null,512),[[Y]])])),_:1}),(0,s.Wm)(H,{onSubmit:E.submit},{default:(0,s.w5)((()=>[(0,s._)("div",Q,[S,(0,s.Wm)(F,{modelValue:U.partie.nom,"onUpdate:modelValue":t[1]||(t[1]=e=>U.partie.nom=e),color:"secondary",class:"q-ml-md q-mb-sm",label:"Nom de la partie"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(O,{name:"sports_esports"})])),_:1},8,["modelValue"]),(0,s.Wm)(F,{modelValue:U.partie.mdp,"onUpdate:modelValue":t[2]||(t[2]=e=>U.partie.mdp=e),type:"password",color:"secondary",class:"q-ml-md q-mb-sm",label:"Mot de passe de la partie"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(O,{name:"lock"})])),_:1},8,["modelValue"])]),(0,s._)("div",P,[$,(0,s.Wm)(F,{modelValue:U.partie.mot,"onUpdate:modelValue":t[3]||(t[3]=e=>U.partie.mot=e),color:"secondary",class:"q-ml-md q-mb-sm",label:"Mot a trouvé"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(O,{name:"chat_bubble"})])),_:1},8,["modelValue"]),(0,s.Wm)(F,{modelValue:U.partie.max,"onUpdate:modelValue":t[4]||(t[4]=e=>U.partie.max=e),type:"number",color:"secondary",class:"q-ml-md q-mb-sm",label:"Nombre de joueur maximum"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(O,{name:"sports_kabaddi"})])),_:1},8,["modelValue"])]),(0,s._)("div",D,[(0,s.Wm)(J,{type:"submit",loading:U.loading,label:"Modifier",color:"positive","no-caps":"",icon:"done",flat:""},null,8,["loading"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])):(0,s.kq)("",!0),(0,s.Wm)(L,{position:"bottom",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)(J,{disable:U.partie.joueurs.length!=U.partie.max,onClick:E.start,color:"primary",label:"Lancer la partie !",size:"18px","no-caps":"",push:"","icon-right":"sports_esports",style:{"border-radius":"15px"}},null,8,["disable","onClick"])])),_:1})])):(0,s.kq)("",!0)])),_:1})}var E=a(7431),I=a(4987),J=a(9302),M=a(9017);const O={data(){return{loading:!1,partie:null,user:null,utils:(0,J.Z)(),partieSettings:!1}},async mounted(){let e=await(0,M.IO)((0,M.hJ)(I["default"].firebasebd,"party"),(0,M.ar)("code","==",this.$route.params.code));(0,M.cf)(e,(e=>{e.docChanges().forEach((async e=>{"added"===e.type&&await this.refresh(),"modified"===e.type&&await this.refresh(),"removed"===e.type&&this.$router.push({name:"home"})}))}))},methods:{async start(){let e=this.partie;e.statut="En cours",e.tour.uid=e.joueurs[0].uid,await this.$store.dispatch("editParty",{partie:e}),this.$router.push({name:"partieEnCoursCreateur",params:{code:this.partie.code}})},async refresh(){this.user=null,this.partie=null;let e=await this.$store.dispatch("getParty",{code:this.$route.params.code});this.partie=e,this.user=(0,E.PR)()},async kickJoueur(e){let t=this.partie;t.joueurs.splice(e,1),await this.$store.dispatch("editParty",{partie:t})},async submit(){this.loading=!0;let e=this.partie;e.mot=e.mot.toUpperCase(),await this.$store.dispatch("editParty",{partie:e}),this.partieSettings=!1,this.loading=!1},async leave(){this.utils.dialog({title:"Veuillez confirmé",message:"Si vous quittez, la partie sera supprimé ",cancel:!0,persistent:!0,ok:{flat:!0,color:"negative",label:"Supprimer"},cancel:{flat:!0,color:"secondary",label:"Annuler"}}).onOk((async()=>{await this.$store.dispatch("deleteParty",{partie:this.partie}),this.$router.push({name:"home"})}))}}};var T=a(1639),A=a(9885),N=a(335),B=a(4455),F=a(786),H=a(2857),K=a(4458),L=a(3190),R=a(1357),Y=a(3706),G=a(136),X=a(8326),ee=a(6611),te=a(627),ae=a(2146),se=a(9984),ie=a.n(se);const oe=(0,T.Z)(O,[["render",U]]),le=oe;ie()(O,"components",{QPage:A.Z,QImg:N.Z,QBtn:B.Z,QSpinnerOrbit:F.Z,QIcon:H.Z,QCard:K.Z,QCardSection:L.Z,QAvatar:R.Z,QDialog:Y.Z,QSpace:G.Z,QForm:X.Z,QInput:ee.Z,QPageSticky:te.Z}),ie()(O,"directives",{ClosePopup:ae.Z})},8290:(e,t,a)=>{e.exports=a.p+"img/logoSimple.3287167f.png"}}]);