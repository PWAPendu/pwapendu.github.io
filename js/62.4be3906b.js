(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[62],{5062:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>G});var s=a(9835),r=a(6970),i=a(8290),n=a.n(i);const o={key:0},c={key:0,class:"row justify-center items-center q-ma-sm"},l={class:"col-4"},u={class:"col text-center"},d={class:"text-bold q-ma-none q-pa-none text-accent text-h6"},p={class:"text-bold q-ma-none q-pa-none text-grey"},h={class:"text-center text-bold text-accent text-h4"},g=(0,s._)("p",{class:"text-center text-bold text-accent text-h4"},"GAGNER PAR",-1),m={class:"row justify-center"},w=(0,s._)("img",{src:"https://cdn.quasar.dev/img/avatar.png"},null,-1),f={class:"text-center text-bold text-accent text-h4 q-mt-md q-mb-xl"},x={class:"row justify-center q-mt-md"};function b(e,t,a,i,b,y){const q=(0,s.up)("q-img"),_=(0,s.up)("q-avatar"),v=(0,s.up)("q-table"),k=(0,s.up)("q-btn"),j=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(j,null,{default:(0,s.w5)((()=>[b.partie&&b.gagnant?((0,s.wg)(),(0,s.iD)("main",o,[b.partie?((0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("div",l,[(0,s.Wm)(q,{src:n()})]),(0,s._)("div",u,[(0,s._)("p",d,(0,r.zw)(b.partie.nom),1),(0,s._)("p",p,"#"+(0,r.zw)(b.partie.code),1)])])):(0,s.kq)("",!0),(0,s._)("p",h,(0,r.zw)(b.gagnant.score)+" points",1),g,(0,s._)("div",m,[(0,s.Wm)(_,{size:"150px"},{default:(0,s.w5)((()=>[w])),_:1})]),(0,s._)("p",f,(0,r.zw)(b.gagnant.pseudo),1),(0,s.Wm)(v,{"auto-width":"",class:"no-shadow",title:"Tableau des scores",rows:b.rows,columns:b.columns,"row-key":"name"},null,8,["rows","columns"]),(0,s._)("div",x,[(0,s.Wm)(k,{style:{width:"200px","border-radius":"30px"},"no-caps":"",size:"25px",onClick:y.quitter,color:"secondary",label:"Quitter"},null,8,["onClick"])])])):(0,s.kq)("",!0)])),_:1})}var y=a(4987),q=a(7431),_=a(9017);const v={data(){return{partie:null,gagnant:null,gagantMis:!1,columns:[{name:"name",required:!0,label:"Pseudo",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"score",align:"center",label:"Score",field:"Score",field:e=>e.score,sortable:!0}],rows:[]}},async mounted(){let e=await(0,_.IO)((0,_.hJ)(y["default"].firebasebd,"party"),(0,_.ar)("code","==",this.$route.params.code));(0,_.cf)(e,(e=>{e.docChanges().forEach((async e=>{"added"===e.type&&(await this.refresh(),this.getGagnant(),this.initScore()),"modified"===e.type&&(await this.refresh(),this.getGagnant(),this.initScore()),"removed"===e.type&&this.$router.push({name:"home"})}))}))},methods:{async refresh(){this.partie=null;let e=await this.$store.dispatch("getParty",{code:this.$route.params.code});this.partie=e},async quitter(){let e=(0,q.PR)(),t=this.partie;t.createur.uid==e.auth.user.uid&&(t.createur.uid="");for(let a=0;a<t.joueurs.length;a++)t.joueurs[a].uid==e.auth.user.uid&&t.joueurs.splice(a,1);0==t.joueurs.length&&""==t.createur.uid?await this.$store.dispatch("deleteParty",{partie:t}):(await this.$store.dispatch("editParty",{partie:t}),this.$router.push({name:"home"}))},getGagnant(){if(!this.gagantMis){let e=this.partie.joueurs,t=e[0];for(let a=1;a<e.length;a++)e[a].score>t.score&&(t=e[a]);this.gagnant=t,this.gagantMis=!0}},initScore(){let e=this.partie.joueurs;this.rows=[];for(let t=0;t<e.length;t++)this.rows.push({name:e[t].pseudo,score:e[t].score})}}};var k=a(1639),j=a(9885),$=a(335),P=a(1357),z=a(6152),Q=a(4455),S=a(9984),Z=a.n(S);const C=(0,k.Z)(v,[["render",b]]),G=C;Z()(v,"components",{QPage:j.Z,QImg:$.Z,QAvatar:P.Z,QTable:z.Z,QBtn:Q.Z})},8290:(e,t,a)=>{e.exports=a.p+"img/logoSimple.3287167f.png"}}]);