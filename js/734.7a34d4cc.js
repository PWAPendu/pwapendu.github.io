(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[734],{8361:(t,e,o)=>{"use strict";o.d(e,{Z:()=>d});var s=o(9835),i=o(6970);const a={class:"row justify-center items-center"},r={class:"text-bold text-accent text-center q-ma-none q-pa-none"};function l(t,e,o,l,n,u){return(0,s.wg)(),(0,s.iD)("div",a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.motTab,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"col"},[(0,s._)("h4",r,(0,i.zw)(t.trouve?t.lettre:t.nonTrouve),1)])))),128))])}const n={props:{motProps:{type:Object}},data(){return{motTab:this.motProps}},mounted(){this.initFirstLettre()},methods:{initFirstLettre(){let t=this.motTab[0].lettre;for(let e=0;e<this.motTab.length;e++)this.motTab[e].lettre==t&&(this.motTab[e].trouve=!0);t=" ";for(let e=0;e<this.motTab.length;e++)this.motTab[e].lettre===t&&(this.motTab[e].trouve=!0)}}};var u=o(1639);const c=(0,u.Z)(n,[["render",l]]),d=c},6734:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>Y});var s=o(9835),i=o(6970),a=o(8290),r=o.n(a);const l={key:0},n={class:"row justify-center items-center q-ma-sm"},u={class:"col-4"},c={class:"col text-center"},d={class:"text-bold q-ma-none q-pa-none text-accent text-h6"},p={class:"text-bold q-ma-none q-pa-none text-grey"},h={class:"col"},m={class:"row justify-center items-center"},f={style:{"font-size":"16px"},class:"text-center q-ml-sm q-ma-none q-pa-none"},y={style:{"font-size":"17px"},class:"text-center q-mb-lg"},b=(0,s.Uk)(" Votre mot : "),w={class:"text-bold"},x={key:0,style:{"font-size":"18px"},class:"q-ml-xl q-mt-lg"},g=(0,s.Uk)(" Au tour de : "),q={class:"text-h6 text-bold"},v={style:{"font-size":"18px"},class:"text-center text-primary q-mt-lg"},P=(0,s.Uk)(" Vie d'équipe : "),k={class:"text-bold"},T={class:"row q-col-gutter-xs justify-center items-center"},_={style:{"font-size":"40px"},class:"text-negative text-center"},z=(0,s._)("p",{class:"text-grey text-bold",style:{"font-size":"18px"}},"En attente du joueur...",-1),j=(0,s._)("p",{class:"text-center text-bold text-accent q-ma-none q-pa-none q-mt-md",style:{"font-size":"16px"}}," Lettre jouée : ",-1),C={class:"text-bold q-ma-none q-pa-none text-center text-secondary",style:{"font-size":"80px"}};function Z(t,e,o,a,Z,W){const I=(0,s.up)("q-img"),S=(0,s.up)("q-btn"),$=(0,s.up)("q-table"),E=(0,s.up)("q-card-section"),Q=(0,s.up)("q-card"),D=(0,s.up)("q-expansion-item"),J=(0,s.up)("MotTrouver"),L=(0,s.up)("q-page-sticky"),M=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(M,null,{default:(0,s.w5)((()=>[Z.partie?((0,s.wg)(),(0,s.iD)("main",l,[(0,s._)("div",n,[(0,s._)("div",u,[(0,s.Wm)(I,{src:r()})]),(0,s._)("div",c,[(0,s._)("p",d,(0,i.zw)(Z.partie.nom),1),(0,s._)("p",p,"#"+(0,i.zw)(Z.partie.code),1)]),(0,s._)("div",h,[(0,s.Wm)(S,{onClick:W.leave,color:"secondary","no-caps":"",label:"Quitter",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["onClick"])])]),(0,s._)("div",null,[(0,s._)("div",m,[(0,s.Wm)(S,{onClick:e[0]||(e[0]=t=>Z.score=!Z.score),size:"18px",color:"accent",icon:"scoreboard",flat:"",round:""}),(0,s._)("p",f," Longeur du mot : "+(0,i.zw)(Z.partie.mot.length),1)]),(0,s.Wm)(D,{"expanded-icon":"",disable:!Z.score,class:"q-mb-lg",modelValue:Z.score,"onUpdate:modelValue":e[1]||(e[1]=t=>Z.score=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(Q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(E,null,{default:(0,s.w5)((()=>[(0,s.Wm)($,{"auto-width":"",class:"no-shadow",title:"Tableau des scores",rows:Z.rows,columns:Z.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["disable","modelValue"]),(0,s._)("p",y,[b,(0,s._)("span",w,(0,i.zw)(Z.partie.mot),1)]),(0,s.Wm)(J,{motProps:Z.partie.motTab},null,8,["motProps"]),Z.joueur?((0,s.wg)(),(0,s.iD)("p",x,[g,(0,s._)("span",q,(0,i.zw)(Z.joueur.pseudo),1)])):(0,s.kq)("",!0),(0,s._)("p",v,[P,(0,s._)("span",k,(0,i.zw)(Z.partie.vieEquipe),1)]),(0,s._)("div",T,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(Z.partie.lettresDite,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"col-1 q-mr-sm"},[(0,s._)("p",_,(0,i.zw)(t),1)])))),128))])]),(0,s.Wm)(L,{position:"bottom-left",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{onClick:W.refuseMot,disable:Z.notPlay,round:"",icon:"close",color:"negative",size:"18px"},null,8,["onClick","disable"])])),_:1}),Z.notPlay?((0,s.wg)(),(0,s.j4)(L,{key:0,position:"bottom",offset:[18,18]},{default:(0,s.w5)((()=>[z])),_:1})):(0,s.kq)("",!0),Z.notPlay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(L,{key:1,style:{"border-radius":"500px !important","background-color":"white"},class:"shadow-24",position:"bottom",offset:[70,70]},{default:(0,s.w5)((()=>[j,(0,s._)("p",C,(0,i.zw)(Z.partie.tour.mot),1)])),_:1})),(0,s.Wm)(L,{position:"bottom-right",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{onClick:W.valideMot,disable:Z.notPlay,round:"",icon:"done",color:"positive",size:"18px"},null,8,["onClick","disable"])])),_:1})])):(0,s.kq)("",!0)])),_:1})}var W=o(8361),I=(o(7431),o(9302)),S=o(4987),$=o(9017);const E={data(){return{partie:null,lettre:"",notPlay:!0,joueur:null,utils:(0,I.Z)(),score:!1,columns:[{name:"name",required:!0,label:"Pseudo",align:"left",field:t=>t.name,format:t=>`${t}`,sortable:!0},{name:"score",align:"center",label:"Score",field:"Score",field:t=>t.score,sortable:!0}],rows:[]}},components:{MotTrouver:W.Z},async mounted(){let t=await(0,$.IO)((0,$.hJ)(S["default"].firebasebd,"party"),(0,$.ar)("code","==",this.$route.params.code));(0,$.cf)(t,(t=>{t.docChanges().forEach((async t=>{"added"===t.type&&(await this.refresh(),this.checkIfIPlay(),this.getPlay(),this.initScore()),"modified"===t.type&&(await this.refresh(),this.checkIfIPlay(),this.getPlay(),this.initScore(),this.checkIfEnd()),"removed"===t.type&&this.$router.push({name:"home"})}))}))},methods:{initScore(){let t=this.partie.joueurs,e=this.partie.createur;this.rows=[];for(let o=0;o<t.length;o++)this.rows.push({name:t[o].pseudo,score:t[o].score});this.rows.push({name:e.pseudo+" (créateur)",score:e.score})},async refresh(){this.partie=null;let t=await this.$store.dispatch("getParty",{code:this.$route.params.code});this.partie=t},checkIfIPlay(){""!=this.partie.tour.mot&&(this.notPlay=!1)},getPlay(){let t=this.partie.joueurs.filter((t=>t.uid==this.partie.tour.uid));this.joueur=t[0]},async valideMot(){let t=this.partie.tour.mot;t=t.toUpperCase(),await this.valideLettre(t)},async valideLettre(t){let e=this.partie;e.tour.mot="";for(let i=0;i<e.motTab.length;i++)e.motTab[i].lettre==t&&(e.motTab[i].trouve=!0);this.notPlay=!0;let o=0,s=this.partie.motTab;for(let i=0;i<s.length;i++)s[i].trouve&&o++;o==s.length?(this.addPointToJoueur(50),this.addPointToCreateur(-10),e.statut="Terminé"):(this.addPointToJoueur(15),this.addPointToCreateur(-10)),this.nextJoueur(),await this.$store.dispatch("editParty",{partie:e})},async refuseMot(){let t=this.partie;t.tour.mot="",t.vieEquipe-=1,this.notPlay=!0,this.addPointToJoueur(-5),this.addPointToCreateur(10),this.nextJoueur(),0==t.vieEquipe&&(t.statut="Terminé",this.addPointToCreateur(20)),await this.$store.dispatch("editParty",{partie:t})},nextJoueur(){let t=this.partie.joueurs,e=t.length;this.partie.tour.index+1==e?(this.partie.tour.index=0,this.partie.tour.uid=t[this.partie.tour.index].uid):(this.partie.tour.index+=1,this.partie.tour.uid=t[this.partie.tour.index].uid)},addPointToJoueur(t){let e=this.partie.tour.uid;for(let o=0;o<this.partie.joueurs.length;o++)e==this.partie.joueurs[o].uid&&(this.partie.joueurs[o].score+=t)},addPointToCreateur(t){this.partie.createur.score+=t},checkIfEnd(){let t=this.partie;if(0==t.vieEquipe)this.$router.push({name:"finPartie",params:{code:t.code}});else{let e=0,o=this.partie.motTab;for(let t=0;t<o.length;t++)o[t].trouve&&e++;e==o.length&&this.$router.push({name:"finPartie",params:{code:t.code}})}},async leave(){this.utils.dialog({title:"Veuillez confirmé",message:"Si vous quittez, la partie sera supprimé ",cancel:!0,persistent:!0,ok:{flat:!0,color:"negative",label:"Supprimer"},cancel:{flat:!0,color:"secondary",label:"Annuler"}}).onOk((async()=>{await this.$store.dispatch("deleteParty",{partie:this.partie})}))}}};var Q=o(1639),D=o(9885),J=o(335),L=o(4455),M=o(1123),V=o(4458),U=o(3190),O=o(6152),A=o(627),F=o(9984),H=o.n(F);const K=(0,Q.Z)(E,[["render",Z]]),Y=K;H()(E,"components",{QPage:D.Z,QImg:J.Z,QBtn:L.Z,QExpansionItem:M.Z,QCard:V.Z,QCardSection:U.Z,QTable:O.Z,QPageSticky:A.Z})},8290:(t,e,o)=>{t.exports=o.p+"img/logoSimple.3287167f.png"}}]);