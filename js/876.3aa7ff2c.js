(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[876],{8361:(t,e,o)=>{"use strict";o.d(e,{Z:()=>d});var s=o(9835),i=o(6970);const a={class:"row justify-center items-center"},r={class:"text-bold text-accent text-center q-ma-none q-pa-none"};function l(t,e,o,l,n,u){return(0,s.wg)(),(0,s.iD)("div",a,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.motTab,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"col"},[(0,s._)("h4",r,(0,i.zw)(t.trouve?t.lettre:t.nonTrouve),1)])))),128))])}const n={props:{motProps:{type:Object}},data(){return{motTab:this.motProps}},mounted(){this.initFirstLettre()},methods:{initFirstLettre(){let t=this.motTab[0].lettre;for(let e=0;e<this.motTab.length;e++)this.motTab[e].lettre==t&&(this.motTab[e].trouve=!0);t=" ";for(let e=0;e<this.motTab.length;e++)this.motTab[e].lettre===t&&(this.motTab[e].trouve=!0)}}};var u=o(1639);const c=(0,u.Z)(n,[["render",l]]),d=c},5485:(t,e,o)=>{"use strict";o.r(e),o.d(e,{default:()=>N});var s=o(9835),i=o(6970),a=o(8290),r=o.n(a);const l={key:0},n={class:"row justify-center items-center q-ma-sm"},u={class:"col-4"},c={class:"col text-center"},d={class:"text-bold q-ma-none q-pa-none text-accent text-h6"},p={class:"text-bold q-ma-none q-pa-none text-grey"},h={class:"col"},m={class:"row justify-center items-center"},f={style:{"font-size":"16px"},class:"text-center q-ml-sm q-ma-none q-pa-none"},y={style:{"font-size":"17px"},class:"text-center q-mb-lg"},w=(0,s.Uk)(" Votre mot : "),b={class:"text-bold"},x={key:0,class:"row items-center"},g={class:"col row items-center"},v={style:{"font-size":"18px"},class:"q-ml-xl q-mt-lg"},q=(0,s.Uk)(" Au tour de : "),P={class:"text-h6 text-bold"},k={style:{"font-size":"18px"},class:"text-center text-primary q-mt-lg"},T=(0,s.Uk)(" Vie d'équipe : "),_={class:"text-bold"},z={class:"row q-col-gutter-xs justify-center items-center"},j={style:{"font-size":"40px"},class:"text-negative text-center"},C=(0,s._)("p",{class:"text-grey text-bold",style:{"font-size":"18px"}},"En attente du joueur...",-1),W=(0,s._)("p",{class:"text-center text-bold text-accent q-ma-none q-pa-none q-mt-md",style:{"font-size":"16px"}}," Lettre jouée : ",-1),Z={class:"text-bold q-ma-none q-pa-none text-center text-secondary",style:{"font-size":"80px"}};function I(t,e,o,a,I,Q){const S=(0,s.up)("q-img"),$=(0,s.up)("q-btn"),E=(0,s.up)("q-table"),D=(0,s.up)("q-card-section"),J=(0,s.up)("q-card"),L=(0,s.up)("q-expansion-item"),M=(0,s.up)("MotTrouver"),V=(0,s.up)("q-avatar"),U=(0,s.up)("q-page-sticky"),A=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(A,null,{default:(0,s.w5)((()=>[I.partie?((0,s.wg)(),(0,s.iD)("main",l,[(0,s._)("div",n,[(0,s._)("div",u,[(0,s.Wm)(S,{src:r()})]),(0,s._)("div",c,[(0,s._)("p",d,(0,i.zw)(I.partie.nom),1),(0,s._)("p",p,"#"+(0,i.zw)(I.partie.code),1)]),(0,s._)("div",h,[(0,s.Wm)($,{onClick:Q.leave,color:"secondary","no-caps":"",label:"Quitter",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["onClick"])])]),(0,s._)("div",null,[(0,s._)("div",m,[(0,s.Wm)($,{onClick:e[0]||(e[0]=t=>I.score=!I.score),size:"18px",color:"accent",icon:"scoreboard",flat:"",round:""}),(0,s._)("p",f," Longeur du mot : "+(0,i.zw)(I.partie.mot.length),1)]),(0,s.Wm)(L,{"expanded-icon":"",disable:!I.score,class:"q-mb-lg",modelValue:I.score,"onUpdate:modelValue":e[1]||(e[1]=t=>I.score=t)},{default:(0,s.w5)((()=>[(0,s.Wm)(J,null,{default:(0,s.w5)((()=>[(0,s.Wm)(D,null,{default:(0,s.w5)((()=>[(0,s.Wm)(E,{"auto-width":"",class:"no-shadow",title:"Tableau des scores",rows:I.rows,columns:I.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["disable","modelValue"]),(0,s._)("p",y,[w,(0,s._)("span",b,(0,i.zw)(I.partie.mot),1)]),(0,s.Wm)(M,{motProps:I.partie.motTab},null,8,["motProps"]),I.joueur?((0,s.wg)(),(0,s.iD)("div",x,[(0,s._)("div",g,[(0,s._)("p",v,[q,(0,s._)("span",P,(0,i.zw)(I.joueur.pseudo),1)]),(0,s.Wm)(V,{class:"q-ml-sm"},{default:(0,s.w5)((()=>[(0,s.Wm)(S,{src:I.joueur.avatar},null,8,["src"])])),_:1})])])):(0,s.kq)("",!0),(0,s._)("p",k,[T,(0,s._)("span",_,(0,i.zw)(I.partie.vieEquipe),1)]),(0,s._)("div",z,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(I.partie.lettresDite,((t,e)=>((0,s.wg)(),(0,s.iD)("div",{key:e,class:"col-1 q-mr-sm"},[(0,s._)("p",j,(0,i.zw)(t),1)])))),128))])]),(0,s.Wm)(U,{position:"bottom-left",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)($,{onClick:Q.refuseMot,disable:I.notPlay,round:"",icon:"close",color:"negative",size:"18px"},null,8,["onClick","disable"])])),_:1}),I.notPlay?((0,s.wg)(),(0,s.j4)(U,{key:0,position:"bottom",offset:[18,18]},{default:(0,s.w5)((()=>[C])),_:1})):(0,s.kq)("",!0),I.notPlay?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(U,{key:1,style:{"border-radius":"500px !important","background-color":"white"},class:"shadow-24",position:"bottom",offset:[70,70]},{default:(0,s.w5)((()=>[W,(0,s._)("p",Z,(0,i.zw)(I.partie.tour.mot),1)])),_:1})),(0,s.Wm)(U,{position:"bottom-right",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)($,{onClick:Q.valideMot,disable:I.notPlay,round:"",icon:"done",color:"positive",size:"18px"},null,8,["onClick","disable"])])),_:1})])):(0,s.kq)("",!0)])),_:1})}var Q=o(8361),S=(o(7431),o(9302)),$=o(4987),E=o(9017);const D={data(){return{partie:null,lettre:"",notPlay:!0,joueur:null,utils:(0,S.Z)(),score:!1,columns:[{name:"name",required:!0,label:"Pseudo",align:"left",field:t=>t.name,format:t=>`${t}`,sortable:!0},{name:"score",align:"center",label:"Score",field:"Score",field:t=>t.score,sortable:!0}],rows:[]}},components:{MotTrouver:Q.Z},async mounted(){let t=await(0,E.IO)((0,E.hJ)($["default"].firebasebd,"party"),(0,E.ar)("code","==",this.$route.params.code));(0,E.cf)(t,(t=>{t.docChanges().forEach((async t=>{"added"===t.type&&(await this.refresh(),this.checkIfIPlay(),this.getPlay(),this.initScore()),"modified"===t.type&&(await this.refresh(),this.checkIfIPlay(),this.getPlay(),this.initScore(),this.checkIfEnd()),"removed"===t.type&&this.$router.push({name:"home"})}))}))},methods:{initScore(){let t=this.partie.joueurs,e=this.partie.createur;this.rows=[];for(let o=0;o<t.length;o++)this.rows.push({name:t[o].pseudo,score:t[o].score});this.rows.push({name:e.pseudo+" (créateur)",score:e.score})},async refresh(){this.partie=null;let t=await this.$store.dispatch("getParty",{code:this.$route.params.code});this.partie=t},checkIfIPlay(){""!=this.partie.tour.mot&&(this.notPlay=!1)},getPlay(){let t=this.partie.joueurs.filter((t=>t.uid==this.partie.tour.uid));this.joueur=t[0]},async valideMot(){let t=this.partie.tour.mot;t=t.toUpperCase(),await this.valideLettre(t)},async valideLettre(t){let e=this.partie;e.tour.mot="";for(let i=0;i<e.motTab.length;i++)e.motTab[i].lettre==t&&(e.motTab[i].trouve=!0);this.notPlay=!0;let o=0,s=this.partie.motTab;for(let i=0;i<s.length;i++)s[i].trouve&&o++;o==s.length?(this.addPointToJoueur(50),this.addPointToCreateur(-10),e.statut="Terminé"):(this.addPointToJoueur(15),this.addPointToCreateur(-10)),this.nextJoueur(),await this.$store.dispatch("editParty",{partie:e})},async refuseMot(){let t=this.partie;t.tour.mot="",t.vieEquipe-=1,this.notPlay=!0,this.addPointToJoueur(-5),this.addPointToCreateur(10),this.nextJoueur(),0==t.vieEquipe&&(t.statut="Terminé",this.addPointToCreateur(20)),await this.$store.dispatch("editParty",{partie:t})},nextJoueur(){let t=this.partie.joueurs,e=t.length;this.partie.tour.index+1==e?(this.partie.tour.index=0,this.partie.tour.uid=t[this.partie.tour.index].uid):(this.partie.tour.index+=1,this.partie.tour.uid=t[this.partie.tour.index].uid)},addPointToJoueur(t){let e=this.partie.tour.uid;for(let o=0;o<this.partie.joueurs.length;o++)e==this.partie.joueurs[o].uid&&(this.partie.joueurs[o].score+=t)},addPointToCreateur(t){this.partie.createur.score+=t},checkIfEnd(){let t=this.partie;if(0==t.vieEquipe)this.$router.push({name:"finPartie",params:{code:t.code}});else{let e=0,o=this.partie.motTab;for(let t=0;t<o.length;t++)o[t].trouve&&e++;e==o.length&&this.$router.push({name:"finPartie",params:{code:t.code}})}},async leave(){this.utils.dialog({title:"Veuillez confirmé",message:"Si vous quittez, la partie sera supprimé ",cancel:!0,persistent:!0,ok:{flat:!0,color:"negative",label:"Supprimer"},cancel:{flat:!0,color:"secondary",label:"Annuler"}}).onOk((async()=>{await this.$store.dispatch("deleteParty",{partie:this.partie})}))}}};var J=o(1639),L=o(9885),M=o(335),V=o(4455),U=o(1123),A=o(4458),O=o(3190),F=o(4528),H=o(1357),K=o(627),Y=o(9984),B=o.n(Y);const G=(0,J.Z)(D,[["render",I]]),N=G;B()(D,"components",{QPage:L.Z,QImg:M.Z,QBtn:V.Z,QExpansionItem:U.Z,QCard:A.Z,QCardSection:O.Z,QTable:F.Z,QAvatar:H.Z,QPageSticky:K.Z})},8290:(t,e,o)=>{t.exports=o.p+"img/logoSimple.3287167f.png"}}]);