(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[936],{2936:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>pe});var s=a(9835),o=a(6970),r=a(8290),l=a.n(r);const i={key:0},n={class:"row justify-center items-center q-ma-sm"},p={class:"col-4"},m={class:"col text-center"},c={class:"text-bold q-ma-none q-pa-none text-accent text-h6"},u={class:"text-bold q-ma-none q-pa-none text-grey"},d={class:"col"},q={class:"q-ml-md"},h={class:"row items-center"},g=(0,s._)("p",{class:"text-accent text-bold q-ma-none q-pa-none",style:{"font-size":"16px"}}," Créateur ",-1),w={class:"row justify-center items-center"},y={class:"col row items-center q-mb-md"},b=["src"],_={key:0,style:{"font-size":"15px"},class:"q-ma-none q-pa-none"},f={class:"col-4"},v={key:0,style:{"font-size":"15px"},class:"q-ml-md"},x={key:0},k={key:0,class:"row items-center justify-center"},W=(0,s._)("p",{class:"text-center text-grey q-ma-none q-pa-none q-mr-sm"}," En attente de joueur supplémentaire... ",-1),j={key:1,class:"row items-center justify-center"},C=(0,s._)("p",{class:"text-center text-grey q-ma-none q-pa-none q-mr-sm"}," Tous les joueurs sont présent ",-1),z={class:"row q-pa-sm"},V=["src"],Z={class:"q-ma-none q-pa-none q-ml-sm"},Q=(0,s._)("p",{class:"q-ml-sm text-bold text-grey"},"Joueur annonyme",-1),S={class:"col row justify-end"},P=(0,s._)("div",{class:"text-h6"},"Paramètres",-1),$={class:"q-ma-sm"},D=(0,s._)("p",{class:"text-bold text-accent q-pa-nonr q-ma-none"}," Configuration de la partie ",-1),U={class:"q-ma-md q-mt-xl"},E=(0,s._)("p",{class:"text-bold text-accent q-pa-nonr q-ma-none"}," Configuration du jeu ",-1),I={class:"row justify-center q-mb-sm"};function J(e,t,a,r,J,M){const O=(0,s.up)("q-img"),T=(0,s.up)("q-btn"),A=(0,s.up)("q-avatar"),N=(0,s.up)("q-spinner-orbit"),B=(0,s.up)("q-icon"),F=(0,s.up)("q-card"),H=(0,s.up)("q-space"),K=(0,s.up)("q-card-section"),L=(0,s.up)("q-input"),R=(0,s.up)("q-form"),Y=(0,s.up)("q-dialog"),G=(0,s.up)("q-page-sticky"),X=(0,s.up)("q-page"),ee=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.j4)(X,null,{default:(0,s.w5)((()=>[J.partie?((0,s.wg)(),(0,s.iD)("main",i,[(0,s._)("div",n,[(0,s._)("div",p,[(0,s.Wm)(O,{src:l()})]),(0,s._)("div",m,[(0,s._)("p",c,(0,o.zw)(J.partie.nom),1),(0,s._)("p",u,"#"+(0,o.zw)(J.partie.code),1)]),(0,s._)("div",d,[(0,s.Wm)(T,{onClick:M.leave,color:"secondary","no-caps":"",label:"Quitter",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["onClick"])])]),(0,s._)("div",q,[(0,s._)("div",h,[g,(0,s.Wm)(T,{onClick:t[0]||(t[0]=e=>J.partieSettings=!0),round:"",class:"q-ml-sm",icon:"settings",size:"15px",color:"accent",flat:""})]),(0,s._)("div",w,[(0,s._)("div",y,[(0,s.Wm)(A,{class:"q-mr-sm"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:J.user.avatar},null,8,b)])),_:1}),J.user?((0,s.wg)(),(0,s.iD)("p",_,(0,o.zw)(J.user.pseudo)+" (vous) ",1)):(0,s.kq)("",!0)]),(0,s._)("div",f,[J.partie?((0,s.wg)(),(0,s.iD)("p",v,(0,o.zw)(J.partie.joueurs.length)+"/"+(0,o.zw)(J.partie.max)+" joueurs ",1)):(0,s.kq)("",!0)])])]),J.partie?((0,s.wg)(),(0,s.iD)("div",x,[J.partie.max!=J.partie.joueurs.length?((0,s.wg)(),(0,s.iD)("div",k,[W,(0,s.Wm)(N,{color:"grey",size:"2em"})])):((0,s.wg)(),(0,s.iD)("div",j,[C,(0,s.Wm)(B,{name:"done"})])),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(J.partie.joueurs,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"q-ma-md",key:t},[(0,s.Wm)(F,{class:"q-mb-sm"},{default:(0,s.w5)((()=>[(0,s._)("div",z,[(0,s.Wm)(A,{size:"80px"},{default:(0,s.w5)((()=>[(0,s._)("img",{src:e.avatar},null,8,V)])),_:2},1024),(0,s._)("div",null,[(0,s._)("h6",Z,(0,o.zw)(e.pseudo.length>13?e.pseudo.substr(0,18)+"...":e.pseudo),1),Q]),(0,s._)("div",S,[(0,s.Wm)(T,{onClick:e=>M.kickJoueur(t),icon:"close",flat:"",color:"negative"},null,8,["onClick"])])])])),_:2},1024)])))),128))])):(0,s.kq)("",!0),J.partie?((0,s.wg)(),(0,s.j4)(Y,{key:1,persistent:"","full-width":"",modelValue:J.partieSettings,"onUpdate:modelValue":t[5]||(t[5]=e=>J.partieSettings=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(F,null,{default:(0,s.w5)((()=>[(0,s.Wm)(K,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[(0,s.Wm)(B,{class:"q-mr-sm",size:"15px",name:"settings",color:"accent"}),P,(0,s.Wm)(H),(0,s.wy)((0,s.Wm)(T,{icon:"close",flat:"",round:"",dense:""},null,512),[[ee]])])),_:1}),(0,s.Wm)(R,{onSubmit:M.submit},{default:(0,s.w5)((()=>[(0,s._)("div",$,[D,(0,s.Wm)(L,{modelValue:J.partie.nom,"onUpdate:modelValue":t[1]||(t[1]=e=>J.partie.nom=e),color:"secondary",class:"q-ml-md q-mb-sm",label:"Nom de la partie"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(B,{name:"sports_esports"})])),_:1},8,["modelValue"]),(0,s.Wm)(L,{modelValue:J.partie.mdp,"onUpdate:modelValue":t[2]||(t[2]=e=>J.partie.mdp=e),type:"password",color:"secondary",class:"q-ml-md q-mb-sm",label:"Mot de passe de la partie"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(B,{name:"lock"})])),_:1},8,["modelValue"])]),(0,s._)("div",U,[E,(0,s.Wm)(L,{modelValue:J.partie.mot,"onUpdate:modelValue":t[3]||(t[3]=e=>J.partie.mot=e),color:"secondary",class:"q-ml-md q-mb-sm",label:"Mot a trouvé"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(B,{name:"chat_bubble"})])),_:1},8,["modelValue"]),(0,s.Wm)(L,{modelValue:J.partie.max,"onUpdate:modelValue":t[4]||(t[4]=e=>J.partie.max=e),type:"number",color:"secondary",class:"q-ml-md q-mb-sm",label:"Nombre de joueur maximum"},{prepend:(0,s.w5)((()=>[(0,s.Wm)(B,{name:"sports_kabaddi"})])),_:1},8,["modelValue"])]),(0,s._)("div",I,[(0,s.Wm)(T,{type:"submit",loading:J.loading,label:"Modifier",color:"positive","no-caps":"",icon:"done",flat:""},null,8,["loading"])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"])):(0,s.kq)("",!0),(0,s.Wm)(G,{position:"bottom",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)(T,{disable:J.partie.joueurs.length!=J.partie.max,onClick:M.start,color:"primary",label:"Lancer la partie !",size:"18px","no-caps":"",push:"","icon-right":"sports_esports",style:{"border-radius":"15px"}},null,8,["disable","onClick"])])),_:1})])):(0,s.kq)("",!0)])),_:1})}var M=a(7431),O=a(4987),T=a(9302),A=a(9017);const N={data(){return{loading:!1,partie:null,user:null,utils:(0,T.Z)(),partieSettings:!1}},async mounted(){let e=await(0,A.IO)((0,A.hJ)(O["default"].firebasebd,"party"),(0,A.ar)("code","==",this.$route.params.code));(0,A.cf)(e,(e=>{e.docChanges().forEach((async e=>{"added"===e.type&&await this.refresh(),"modified"===e.type&&await this.refresh(),"removed"===e.type&&this.$router.push({name:"home"})}))}))},methods:{async start(){let e=this.partie;e.statut="En cours",e.tour.uid=e.joueurs[0].uid,await this.$store.dispatch("editParty",{partie:e}),this.$router.push({name:"partieEnCoursCreateur",params:{code:this.partie.code}})},async refresh(){this.user=null,this.partie=null;let e=await this.$store.dispatch("getParty",{code:this.$route.params.code});this.partie=e;let t=(0,M.PR)();this.user=t.user},async kickJoueur(e){let t=this.partie;t.joueurs.splice(e,1),await this.$store.dispatch("editParty",{partie:t})},async submit(){this.loading=!0;let e=this.partie;e.mot=e.mot.toUpperCase(),await this.$store.dispatch("editParty",{partie:e}),this.partieSettings=!1,this.loading=!1},async leave(){this.utils.dialog({title:"Veuillez confirmé",message:"Si vous quittez, la partie sera supprimé ",cancel:!0,persistent:!0,ok:{flat:!0,color:"negative",label:"Supprimer"},cancel:{flat:!0,color:"secondary",label:"Annuler"}}).onOk((async()=>{await this.$store.dispatch("deleteParty",{partie:this.partie}),this.$router.push({name:"home"})}))}}};var B=a(1639),F=a(9885),H=a(335),K=a(4455),L=a(1357),R=a(786),Y=a(2857),G=a(4458),X=a(3706),ee=a(3190),te=a(136),ae=a(8326),se=a(6611),oe=a(627),re=a(2146),le=a(9984),ie=a.n(le);const ne=(0,B.Z)(N,[["render",J]]),pe=ne;ie()(N,"components",{QPage:F.Z,QImg:H.Z,QBtn:K.Z,QAvatar:L.Z,QSpinnerOrbit:R.Z,QIcon:Y.Z,QCard:G.Z,QDialog:X.Z,QCardSection:ee.Z,QSpace:te.Z,QForm:ae.Z,QInput:se.Z,QPageSticky:oe.Z}),ie()(N,"directives",{ClosePopup:re.Z})},8290:(e,t,a)=>{e.exports=a.p+"img/logoSimple.3287167f.png"}}]);