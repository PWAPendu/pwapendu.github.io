(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[84],{3593:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var a=s(9835),r=s(6970);const o={class:"row justify-center items-center q-gutter-xs"},i={class:"text-bold text-accent text-center q-ma-none q-pa-none"};function l(e,t,s,l,n,u){return(0,a.wg)(),(0,a.iD)("div",o,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.motTab,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"col-1 q-ma-none q-pa-none"},[(0,a._)("h4",i,(0,r.zw)(e.trouve?e.lettre:e.nonTrouve),1)])))),128))])}const n={props:{motProps:{type:Object}},data(){return{motTab:this.motProps}},mounted(){this.initFirstLettre()},methods:{initFirstLettre(){let e=this.motTab[0].lettre;for(let t=0;t<this.motTab.length;t++)this.motTab[t].lettre==e&&(this.motTab[t].trouve=!0);e=" ";for(let t=0;t<this.motTab.length;t++)this.motTab[t].lettre===e&&(this.motTab[t].trouve=!0)}}};var u=s(1639);const c=(0,u.Z)(n,[["render",l]]),d=c},7084:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>R});var a=s(9835),r=s(6970),o=s(8290),i=s.n(o);const l={key:0,class:"row justify-center items-center q-ma-sm"},n={class:"col-4"},u={class:"col text-center"},c={class:"text-bold q-ma-none q-pa-none text-accent text-h6"},d={class:"text-bold q-ma-none q-pa-none text-grey"},p={class:"col"},m={key:1},h={class:"row justify-center items-center"},w={style:{"font-size":"16px"},class:"text-center q-ml-sm q-ma-none q-pa-none"},f={key:0,class:"row items-center"},y={class:"col row items-center"},g={style:{"font-size":"18px"},class:"q-ml-xl q-mt-lg"},b=(0,a.Uk)(" Au tour de : "),q={class:"text-h6 text-bold"},v={style:{"font-size":"18px"},class:"text-center text-primary q-mt-lg"},x=(0,a.Uk)(" Vie d'équipe : "),P={class:"text-bold"},k={class:"row q-col-gutter-xs justify-center items-center"},_={style:{"font-size":"40px"},class:"text-negative text-center"};function j(e,t,s,o,j,T){const z=(0,a.up)("q-img"),Z=(0,a.up)("q-btn"),W=(0,a.up)("q-table"),I=(0,a.up)("q-card-section"),Q=(0,a.up)("q-card"),D=(0,a.up)("q-expansion-item"),$=(0,a.up)("MotTrouver"),S=(0,a.up)("q-avatar"),C=(0,a.up)("q-input"),V=(0,a.up)("q-form"),E=(0,a.up)("q-page-sticky"),U=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(U,null,{default:(0,a.w5)((()=>[j.partie?((0,a.wg)(),(0,a.iD)("div",l,[(0,a._)("div",n,[(0,a.Wm)(z,{src:i()})]),(0,a._)("div",u,[(0,a._)("p",c,(0,r.zw)(j.partie.nom),1),(0,a._)("p",d,"#"+(0,r.zw)(j.partie.code),1)]),(0,a._)("div",p,[(0,a.Wm)(Z,{onClick:T.leave,color:"secondary","no-caps":"",label:"Quitter",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["onClick"])])])):(0,a.kq)("",!0),j.partie?((0,a.wg)(),(0,a.iD)("div",m,[(0,a._)("div",h,[(0,a.Wm)(Z,{onClick:t[0]||(t[0]=e=>j.score=!j.score),size:"18px",color:"accent",icon:"scoreboard",flat:"",round:""}),(0,a._)("p",w," Longeur du mot : "+(0,r.zw)(j.partie.mot.length),1)]),(0,a.Wm)(D,{"expanded-icon":"",disable:!j.score,class:"q-mb-lg",modelValue:j.score,"onUpdate:modelValue":t[1]||(t[1]=e=>j.score=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(Q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{"auto-width":"",class:"no-shadow",title:"Tableau des scores",rows:j.rows,columns:j.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["disable","modelValue"]),(0,a.Wm)($,{motProps:j.partie.motTab},null,8,["motProps"]),j.joueur?((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("div",y,[(0,a._)("p",g,[b,(0,a._)("span",q,(0,r.zw)(j.joueur.pseudo),1)]),(0,a.Wm)(S,{class:"q-ml-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{src:j.joueur.avatar},null,8,["src"])])),_:1})])])):(0,a.kq)("",!0),(0,a._)("p",v,[x,(0,a._)("span",P,(0,r.zw)(j.partie.vieEquipe),1)]),(0,a._)("div",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(j.partie.lettresDite,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"col-1 q-mr-sm"},[(0,a._)("p",_,(0,r.zw)(e),1)])))),128))])])):(0,a.kq)("",!0),(0,a.Wm)(E,{position:"bottom",offset:[18,18]},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{onSubmit:T.joue,disable:j.notPlay},{default:(0,a.w5)((()=>[(0,a.Wm)(C,{loading:j.loading,style:{width:"300px"},disable:j.notPlay,label:"Entrer la lettre",modelValue:j.lettre,"onUpdate:modelValue":t[2]||(t[2]=e=>j.lettre=e),"lazy-rules":"",rules:[e=>e&&1==e.length||"Vous ne pouvez mettre q'une seule lettre"]},null,8,["loading","disable","modelValue","rules"]),(0,a.Wm)(Z,{style:{display:"none"},type:"submit"})])),_:1},8,["onSubmit","disable"])])),_:1})])),_:1})}s(6727);var T=s(3593),z=s(7431),Z=s(4987),W=s(9017);const I={data(){return{partie:null,lettre:"",notPlay:!0,joueur:null,loading:!1,score:!1,columns:[{name:"name",required:!0,label:"Pseudo",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"score",align:"center",label:"Score",field:"Score",field:e=>e.score,sortable:!0}],rows:[]}},components:{MotTrouver:T.Z},async mounted(){let e=await(0,W.IO)((0,W.hJ)(Z["default"].firebasebd,"party"),(0,W.ar)("code","==",this.$route.params.code));(0,W.cf)(e,(e=>{e.docChanges().forEach((async e=>{"added"===e.type&&(await this.refresh(),this.checkIfIPlay(),this.getPlay(),this.initScore()),"modified"===e.type&&(await this.refresh(),this.checkIfIPlay(),this.getPlay(),this.initScore(),this.checkIfEnd()),"removed"===e.type&&this.$router.push({name:"home"})}))}))},methods:{initScore(){let e=this.partie.joueurs,t=this.partie.createur;this.rows=[];for(let s=0;s<e.length;s++)this.rows.push({name:e[s].pseudo,score:e[s].score});this.rows.push({name:t.pseudo+" (créateur)",score:t.score})},async refresh(){this.partie=null;let e=await this.$store.dispatch("getParty",{code:this.$route.params.code});this.partie=e},checkIfIPlay(){let e=(0,z.PR)();this.partie.tour.uid==e.auth.user.uid&&""==this.partie.tour.mot&&(this.notPlay=!1)},getPlay(){let e=this.partie.joueurs.filter((e=>e.uid==this.partie.tour.uid));this.joueur=e[0]},async leave(){let e=(0,z.PR)(),t=this.partie;t.joueurs=t.joueurs.filter((t=>t.uid!=e.auth.user.uid)),0==t.joueurs.length?await this.$store.dispatch("deleteParty",{partie:t}):await this.$store.dispatch("editParty",{partie:t}),this.$router.push({name:"home"})},async joue(){if(""!=this.lettre){this.loading=!0;let e=this.partie;e.tour.mot=this.lettre,e.lettresDite.includes(this.lettre)||e.lettresDite.push(this.lettre),await this.$store.dispatch("editParty",{partie:e}),this.lettre="",this.notPlay=!0,this.loading=!1}},checkIfEnd(){let e=this.partie;if(0==e.vieEquipe)this.$router.push({name:"finPartie",params:{code:e.code}});else{let t=0,s=this.partie.motTab;for(let e=0;e<s.length;e++)s[e].trouve&&t++;t==s.length&&this.$router.push({name:"finPartie",params:{code:e.code}})}}}};var Q=s(1639),D=s(9885),$=s(335),S=s(4455),C=s(1123),V=s(4458),E=s(3190),U=s(4528),F=s(1357),L=s(627),A=s(8326),H=s(6611),K=s(9984),M=s.n(K);const O=(0,Q.Z)(I,[["render",j]]),R=O;M()(I,"components",{QPage:D.Z,QImg:$.Z,QBtn:S.Z,QExpansionItem:C.Z,QCard:V.Z,QCardSection:E.Z,QTable:U.Z,QAvatar:F.Z,QPageSticky:L.Z,QForm:A.Z,QInput:H.Z})},8290:(e,t,s)=>{e.exports=s.p+"img/logoSimple.3287167f.png"}}]);