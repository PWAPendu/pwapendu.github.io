(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[806],{3593:(e,t,s)=>{"use strict";s.d(t,{Z:()=>d});var a=s(9835),o=s(6970);const r={class:"row justify-center items-center q-gutter-xs"},i={class:"text-bold text-accent text-center q-ma-none q-pa-none"};function l(e,t,s,l,n,u){return(0,a.wg)(),(0,a.iD)("div",r,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.motTab,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"col-1 q-ma-none q-pa-none"},[(0,a._)("h4",i,(0,o.zw)(e.trouve?e.lettre:e.nonTrouve),1)])))),128))])}const n={props:{motProps:{type:Object}},data(){return{motTab:this.motProps}},mounted(){this.initFirstLettre()},methods:{initFirstLettre(){let e=this.motTab[0].lettre;for(let t=0;t<this.motTab.length;t++)this.motTab[t].lettre==e&&(this.motTab[t].trouve=!0);e=" ";for(let t=0;t<this.motTab.length;t++)this.motTab[t].lettre===e&&(this.motTab[t].trouve=!0)}}};var u=s(1639);const c=(0,u.Z)(n,[["render",l]]),d=c},5806:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>B});var a=s(9835),o=s(6970),r=s(8290),i=s.n(r);const l={key:0},n={class:"row justify-center items-center q-ma-sm"},u={class:"col-4"},c={class:"text-bold q-ma-none q-pa-none text-accent text-h6"},d={class:"text-bold q-ma-none q-pa-none text-grey"},p={class:"col row justify-end"},m={class:"col-4"},h={key:0},w={class:"row justify-center items-center"},f={style:{"font-size":"16px"},class:"text-center q-ml-sm q-ma-none q-pa-none"},y={key:0,class:"row items-center"},g={class:"col row items-center"},b={style:{"font-size":"18px"},class:"q-ml-xl q-mt-lg"},q=(0,a.Uk)(" Au tour de : "),v={class:"text-h6 text-bold"},x={style:{"font-size":"18px"},class:"text-center text-primary q-mt-lg"},_=(0,a.Uk)(" Vie d'équipe : "),P={class:"text-bold"},k={class:"row q-col-gutter-xs justify-center items-center"},j={style:{"font-size":"40px"},class:"text-negative text-center"};function T(e,t,s,r,T,Z){const z=(0,a.up)("q-img"),W=(0,a.up)("q-btn"),I=(0,a.up)("q-table"),Q=(0,a.up)("q-card-section"),D=(0,a.up)("q-card"),$=(0,a.up)("q-expansion-item"),S=(0,a.up)("MotTrouver"),C=(0,a.up)("q-avatar"),V=(0,a.up)("q-input"),E=(0,a.up)("q-form"),U=(0,a.up)("q-page-sticky"),F=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(F,null,{default:(0,a.w5)((()=>[T.partie?((0,a.wg)(),(0,a.iD)("main",l,[(0,a._)("div",n,[(0,a._)("div",{class:(0,o.C_)(T.utils.screen.gt.md?"col-1":"col-4")},[(0,a.Wm)(z,{src:i()})],2),(0,a._)("div",u,[(0,a._)("p",c,(0,o.zw)(T.partie.nom),1),(0,a._)("p",d,"#"+(0,o.zw)(T.partie.code),1)]),(0,a._)("div",p,[(0,a._)("div",m,[(0,a.Wm)(W,{onClick:Z.leave,color:"secondary","no-caps":"",label:"Quitter",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["onClick"])])])]),T.partie?((0,a.wg)(),(0,a.iD)("div",h,[(0,a._)("div",w,[(0,a.Wm)(W,{onClick:t[0]||(t[0]=e=>T.score=!T.score),size:"18px",color:"accent",icon:"scoreboard",flat:"",round:""}),(0,a._)("p",f," Longeur du mot : "+(0,o.zw)(T.partie.mot.length),1)]),(0,a.Wm)($,{"expanded-icon":"",disable:!T.score,class:"q-mb-lg",modelValue:T.score,"onUpdate:modelValue":t[1]||(t[1]=e=>T.score=e)},{default:(0,a.w5)((()=>[(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Wm)(Q,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,{"auto-width":"",class:"no-shadow",title:"Tableau des scores",rows:T.rows,columns:T.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["disable","modelValue"]),(0,a.Wm)(S,{motProps:T.partie.motTab},null,8,["motProps"]),T.joueur?((0,a.wg)(),(0,a.iD)("div",y,[(0,a._)("div",g,[(0,a._)("p",b,[q,(0,a._)("span",v,(0,o.zw)(T.joueur.pseudo),1)]),(0,a.Wm)(C,{class:"q-ml-sm"},{default:(0,a.w5)((()=>[(0,a.Wm)(z,{src:T.joueur.avatar},null,8,["src"])])),_:1})])])):(0,a.kq)("",!0),(0,a._)("p",x,[_,(0,a._)("span",P,(0,o.zw)(T.partie.vieEquipe),1)]),(0,a._)("div",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(T.partie.lettresDite,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"col-1 q-mr-sm"},[(0,a._)("p",j,(0,o.zw)(e),1)])))),128))])])):(0,a.kq)("",!0),(0,a.Wm)(U,{position:"bottom",offset:[18,18]},{default:(0,a.w5)((()=>[(0,a.Wm)(E,{onSubmit:Z.joue,disable:T.notPlay},{default:(0,a.w5)((()=>[(0,a.Wm)(V,{loading:T.loading,style:{width:"300px"},disable:T.notPlay,label:"Entrer la lettre",modelValue:T.lettre,"onUpdate:modelValue":t[2]||(t[2]=e=>T.lettre=e),"lazy-rules":"",rules:[e=>e&&1==e.length||"Vous ne pouvez mettre q'une seule lettre"]},null,8,["loading","disable","modelValue","rules"]),(0,a.Wm)(W,{style:{display:"none"},type:"submit"})])),_:1},8,["onSubmit","disable"])])),_:1})])):(0,a.kq)("",!0)])),_:1})}s(6727);var Z=s(3593),z=s(7431),W=s(4987),I=s(9017),Q=s(9302);const D={data(){return{partie:null,lettre:"",notPlay:!0,joueur:null,loading:!1,score:!1,utils:(0,Q.Z)(),columns:[{name:"name",required:!0,label:"Pseudo",align:"left",field:e=>e.name,format:e=>`${e}`,sortable:!0},{name:"score",align:"center",label:"Score",field:"Score",field:e=>e.score,sortable:!0}],rows:[]}},components:{MotTrouver:Z.Z},async mounted(){let e=await(0,I.IO)((0,I.hJ)(W["default"].firebasebd,"party"),(0,I.ar)("code","==",this.$route.params.code));(0,I.cf)(e,(e=>{e.docChanges().forEach((async e=>{"added"===e.type&&(await this.refresh(),this.checkIfIPlay(),this.getPlay(),this.initScore()),"modified"===e.type&&(await this.refresh(),this.checkIfIPlay(),this.getPlay(),this.initScore(),this.checkIfEnd()),"removed"===e.type&&this.$router.push({name:"home"})}))}))},methods:{initScore(){let e=this.partie.joueurs,t=this.partie.createur;this.rows=[];for(let s=0;s<e.length;s++)this.rows.push({name:e[s].pseudo,score:e[s].score});this.rows.push({name:t.pseudo+" (créateur)",score:t.score})},async refresh(){this.partie=null;let e=await this.$store.dispatch("getParty",{code:this.$route.params.code});this.partie=e},checkIfIPlay(){let e=(0,z.PR)();this.partie.tour.uid==e.auth.user.uid&&""==this.partie.tour.mot&&(this.notPlay=!1)},getPlay(){let e=this.partie.joueurs.filter((e=>e.uid==this.partie.tour.uid));this.joueur=e[0]},async leave(){let e=(0,z.PR)(),t=this.partie;t.joueurs=t.joueurs.filter((t=>t.uid!=e.auth.user.uid)),0==t.joueurs.length?await this.$store.dispatch("deleteParty",{partie:t}):await this.$store.dispatch("editParty",{partie:t}),this.$router.push({name:"home"})},async joue(){if(""!=this.lettre){this.loading=!0;let e=this.partie;e.tour.mot=this.lettre,e.lettresDite.includes(this.lettre)||e.lettresDite.push(this.lettre),await this.$store.dispatch("editParty",{partie:e}),this.lettre="",this.notPlay=!0,this.loading=!1}},checkIfEnd(){let e=this.partie;if(0==e.vieEquipe)this.$router.push({name:"finPartie",params:{code:e.code}});else{let t=0,s=this.partie.motTab;for(let e=0;e<s.length;e++)s[e].trouve&&t++;t==s.length&&this.$router.push({name:"finPartie",params:{code:e.code}})}}}};var $=s(1639),S=s(9885),C=s(335),V=s(4455),E=s(1123),U=s(4458),F=s(3190),L=s(4528),A=s(1357),H=s(627),K=s(8326),M=s(6611),O=s(9984),R=s.n(O);const Y=(0,$.Z)(D,[["render",T]]),B=Y;R()(D,"components",{QPage:S.Z,QImg:C.Z,QBtn:V.Z,QExpansionItem:E.Z,QCard:U.Z,QCardSection:F.Z,QTable:L.Z,QAvatar:A.Z,QPageSticky:H.Z,QForm:K.Z,QInput:M.Z})},8290:(e,t,s)=>{e.exports=s.p+"img/logoSimple.3287167f.png"}}]);