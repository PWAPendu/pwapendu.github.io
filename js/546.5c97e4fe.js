"use strict";(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[546],{5546:(e,t,a)=>{a.r(t),a.d(t,{default:()=>H});var s=a(9835),i=a(6970);const r={class:"row justify-center items-center q-mb-sm"},o={class:"col"},n={key:0},l={key:1,class:"row justify-center items-center q-mt-xl"};function p(e,t,a,p,d,u){const c=(0,s.up)("q-btn"),m=(0,s.up)("q-input"),h=(0,s.up)("q-form"),w=(0,s.up)("PartyCard"),y=(0,s.up)("q-scroll-area"),f=(0,s.up)("q-spinner-dots"),g=(0,s.up)("q-page-sticky"),q=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(h,null,{default:(0,s.w5)((()=>[(0,s._)("div",r,[(0,s._)("div",o,[(0,s.Wm)(m,{class:"q-mr-sm q-ml-sm",outlined:"",rounded:"",label:"Rechercher une partie ( code )"},{append:(0,s.w5)((()=>[(0,s.Wm)(c,{size:"20px",color:"primary",round:"",dense:"",flat:"",icon:"search"})])),_:1})])])])),_:1}),d.parties?((0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(y,{style:(0,i.j5)("height:"+e.height+"px")},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(d.parties,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"q-ma-md",key:t},[(0,s.Wm)(w,{partie:e},null,8,["partie"])])))),128))])),_:1},8,["style"])])):((0,s.wg)(),(0,s.iD)("div",l,[(0,s.Wm)(f,{color:"accent",size:"50px"})])),(0,s.Wm)(g,{position:"bottom-right",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{to:{name:"createParty"},round:"",color:"secondary",icon:"add",size:"25px"})])),_:1})])),_:1})}const d={class:"q-pa-md row items-center justify-around"},u={class:"col"},c={class:"text-bold text-h6 q-ma-none q-pa-none"},m={class:"col-4"},h={style:{"font-size":"18px"},class:"text-grey q-ma-none q-pa-none"},w={class:"col"},y={class:"text-bold q-pa-none q-ma-none"},f={class:"text-grey"},g=(0,s._)("div",{class:"text-h6"},"Entrez le mot de passe",-1),q={class:"row justify-center"};function _(e,t,a,r,o,n){const l=(0,s.up)("q-btn"),p=(0,s.up)("q-card"),_=(0,s.up)("q-space"),b=(0,s.up)("q-card-section"),x=(0,s.up)("q-input"),v=(0,s.up)("q-form"),j=(0,s.up)("q-dialog"),W=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[a.partie?((0,s.wg)(),(0,s.j4)(p,{key:0,class:"shadow-5 q-pa-md",style:{"border-radius":"15px"}},{default:(0,s.w5)((()=>[(0,s._)("div",d,[(0,s._)("div",u,[(0,s._)("p",c,(0,i.zw)(a.partie.nom),1)]),(0,s._)("div",m,[(0,s._)("p",h,(0,i.zw)(a.partie.statut),1)]),(0,s._)("div",w,[(0,s.Wm)(l,{disable:"En attente"!=a.partie.statut,loading:o.loading,onClick:n.join,color:"primary",label:"Joindre","no-caps":"",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["disable","loading","onClick"])])]),(0,s._)("p",y,[(0,s._)("span",f,"#"+(0,i.zw)("En attente"!=a.partie.statut?"########":a.partie.code),1),(0,s.Uk)(" - "+(0,i.zw)(a.partie.joueurs.length)+"/"+(0,i.zw)(a.partie.max)+" joueur(s) ",1)])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(j,{persistent:"","full-width":"",modelValue:o.mdp,"onUpdate:modelValue":t[1]||(t[1]=e=>o.mdp=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(p,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[g,(0,s.Wm)(_),(0,s.wy)((0,s.Wm)(l,{icon:"close",flat:"",round:"",dense:""},null,512),[[W]])])),_:1}),(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{onSubmit:n.jointMdp},{default:(0,s.w5)((()=>[(0,s.Wm)(x,{modelValue:o.mdpText,"onUpdate:modelValue":t[0]||(t[0]=e=>o.mdpText=e),type:"password",class:"q-ma-md"},null,8,["modelValue"]),(0,s._)("div",q,[(0,s.Wm)(l,{flat:"",color:"primary",type:"submit",label:"Valider"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var b=a(7431),x=a(9302);const v={props:{partie:{type:Object}},data(){return{mdp:!1,loading:!1,utils:(0,x.Z)(),mdpText:""}},methods:{async join(){this.loading=!0;let e=this.partie;if(""!=e.mdp)this.mdp=!0;else{let t=(0,b.PR)(),a={pseudo:t.pseudo,uid:t.auth.user.uid,avatar:t.avatar,score:0};e.joueurs<e.max?(e.joueurs.push(a),await this.$store.dispatch("editParty",{partie:e}),this.$router.push({name:"attenteJoueur",params:{code:this.partie.code}})):(0,b.h4)("Cette partie est pleinne","warning","error"),this.loading=!1}this.loading=!1},async jointMdp(){if(this.mdpText==this.partie.mdp){let e=this.partie;this.mdp=!1;let t=(0,b.PR)(),a={pseudo:t.pseudo,uid:t.auth.user.uid,score:0};e.joueurs<e.max?(e.joueurs.push(a),await this.$store.dispatch("editParty",{partie:e}),this.$router.push({name:"attenteJoueur",params:{code:this.partie.code}})):(0,b.h4)("Cette partie est pleinne","warning","error")}this.mdp=!1,this.loading=!1}}};var j=a(1639),W=a(4458),Z=a(4455),Q=a(3706),k=a(3190),C=a(136),P=a(8326),z=a(6611),D=a(2146),S=a(9984),V=a.n(S);const T=(0,j.Z)(v,[["render",_]]),$=T;V()(v,"components",{QCard:W.Z,QBtn:Z.Z,QDialog:Q.Z,QCardSection:k.Z,QSpace:C.Z,QForm:P.Z,QInput:z.Z}),V()(v,"directives",{ClosePopup:D.Z});var E=a(4987),I=a(9017);const J={name:"IndexPage",data(){return{parties:null,heigth:""}},components:{PartyCard:$},async mounted(){this.height=(0,b.$E)()-190;let e=await(0,I.IO)((0,I.hJ)(E["default"].firebasebd,"party"));(0,I.cf)(e,(e=>{e.docChanges().forEach((async e=>{"added"===e.type&&await this.refresh(),"modified"===e.type&&await this.refresh(),"removed"===e.type&&await this.refresh()}))}))},methods:{async refresh(){this.partie=null;let e=await this.$store.dispatch("getAllParty");this.parties=e}}};var R=a(9885),U=a(8144),A=a(7501),B=a(627);const F=(0,j.Z)(J,[["render",p]]),H=F;V()(J,"components",{QPage:R.Z,QForm:P.Z,QInput:z.Z,QBtn:Z.Z,QScrollArea:U.Z,QSpinnerDots:A.Z,QPageSticky:B.Z})}}]);