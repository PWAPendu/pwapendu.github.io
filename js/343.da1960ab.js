"use strict";(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[343],{5343:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Y});var s=a(9835),r=a(6970);const i={class:"row justify-center items-center q-mb-sm q-mt-sm"},o={class:"col"},l={key:0},n={key:0},d=(0,s._)("p",{class:"text-center text-bold text-grey q-mt-lg"}," Aucune partie(s) n'est acutuellement disponible ",-1),p=[d],u={key:1,class:"row justify-center items-center q-mt-xl"};function c(e,t,a,d,c,m){const h=(0,s.up)("q-btn"),w=(0,s.up)("q-input"),y=(0,s.up)("q-form"),g=(0,s.up)("PartyCard"),f=(0,s.up)("q-scroll-area"),q=(0,s.up)("q-spinner-dots"),x=(0,s.up)("q-page-sticky"),_=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(_,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",o,[(0,s.Wm)(w,{modelValue:c.cherche,"onUpdate:modelValue":t[0]||(t[0]=e=>c.cherche=e),class:"q-mr-sm q-ml-sm",outlined:"",rounded:"",placeholder:c.shadowText},{append:(0,s.w5)((()=>[(0,s.Wm)(h,{size:"20px",color:"primary",round:"",dense:"",flat:"",icon:"search"})])),_:1},8,["modelValue","placeholder"])])])])),_:1}),c.parties?((0,s.wg)(),(0,s.iD)("div",l,[0==c.parties.length?((0,s.wg)(),(0,s.iD)("div",n,p)):(0,s.kq)("",!0),(0,s.Wm)(f,{style:(0,r.j5)("height:"+e.height+"px")},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.parties,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"q-ma-md",key:t},[(0,s.Wm)(g,{partie:e},null,8,["partie"])])))),128))])),_:1},8,["style"])])):((0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(q,{color:"accent",size:"50px"})])),(0,s.Wm)(x,{position:"bottom-right",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{to:{name:"createParty"},round:"",color:"secondary",icon:"add",size:"25px"})])),_:1})])),_:1})}const m={class:"q-pa-md row items-center justify-around"},h={class:"col"},w={class:"text-bold text-h6 q-ma-none q-pa-none"},y={class:"col-4"},g={style:{"font-size":"18px"},class:"text-grey q-ma-none q-pa-none"},f={class:"col"},q={class:"text-bold q-pa-none q-ma-none"},x={class:"text-grey"},_=(0,s._)("div",{class:"text-h6"},"Entrez le mot de passe",-1),b={class:"row justify-center"};function v(e,t,a,i,o,l){const n=(0,s.up)("q-btn"),d=(0,s.up)("q-card"),p=(0,s.up)("q-space"),u=(0,s.up)("q-card-section"),c=(0,s.up)("q-input"),v=(0,s.up)("q-form"),j=(0,s.up)("q-dialog"),W=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[a.partie?((0,s.wg)(),(0,s.j4)(d,{key:0,class:"shadow-5 q-pa-md",style:{"border-radius":"15px"}},{default:(0,s.w5)((()=>[(0,s._)("div",m,[(0,s._)("div",h,[(0,s._)("p",w,(0,r.zw)(a.partie.nom),1)]),(0,s._)("div",y,[(0,s._)("p",g,(0,r.zw)(a.partie.statut),1)]),(0,s._)("div",f,[(0,s.Wm)(n,{disable:"En attente"!=a.partie.statut,loading:o.loading,onClick:l.join,color:"primary",label:"Joindre","no-caps":"",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["disable","loading","onClick"])])]),(0,s._)("p",q,[(0,s._)("span",x,"#"+(0,r.zw)("En attente"!=a.partie.statut?"########":a.partie.code),1),(0,s.Uk)(" - "+(0,r.zw)(a.partie.joueurs.length)+"/"+(0,r.zw)(a.partie.max)+" joueur(s) ",1)])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(j,{persistent:"","full-width":"",modelValue:o.mdp,"onUpdate:modelValue":t[1]||(t[1]=e=>o.mdp=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(d,null,{default:(0,s.w5)((()=>[(0,s.Wm)(u,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[_,(0,s.Wm)(p),(0,s.wy)((0,s.Wm)(n,{icon:"close",flat:"",round:"",dense:""},null,512),[[W]])])),_:1}),(0,s.Wm)(u,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{onSubmit:l.jointMdp},{default:(0,s.w5)((()=>[(0,s.Wm)(c,{modelValue:o.mdpText,"onUpdate:modelValue":t[0]||(t[0]=e=>o.mdpText=e),type:"password",class:"q-ma-md"},null,8,["modelValue"]),(0,s._)("div",b,[(0,s.Wm)(n,{flat:"",color:"primary",type:"submit",label:"Valider"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var j=a(7431),W=a(9302);const Z={props:{partie:{type:Object}},data(){return{mdp:!1,loading:!1,utils:(0,W.Z)(),mdpText:""}},methods:{async join(){this.loading=!0;let e=this.partie;if(""!=e.mdp)this.mdp=!0;else{let t=(0,j.PR)(),a={pseudo:t.pseudo,uid:t.auth.user.uid,avatar:t.avatar,score:0};e.joueurs<e.max?(e.joueurs.push(a),this.$router.push({name:"attenteJoueur",params:{code:this.partie.code}}),await this.$store.dispatch("editParty",{partie:e})):(0,j.h4)("Cette partie est pleinne","warning","error"),this.loading=!1}this.loading=!1},async jointMdp(){if(this.mdpText==this.partie.mdp){let e=this.partie;this.mdp=!1;let t=(0,j.PR)(),a={pseudo:t.pseudo,uid:t.auth.user.uid,score:0};e.joueurs<e.max?(e.joueurs.push(a),this.$router.push({name:"attenteJoueur",params:{code:this.partie.code}}),await this.$store.dispatch("editParty",{partie:e})):(0,j.h4)("Cette partie est pleinne","warning","error")}this.mdp=!1,this.loading=!1}}};var k=a(1639),Q=a(4458),C=a(4455),P=a(3706),z=a(3190),V=a(136),D=a(8326),T=a(6611),S=a(2146),$=a(9984),E=a.n($);const I=(0,k.Z)(Z,[["render",v]]),J=I;E()(Z,"components",{QCard:Q.Z,QBtn:C.Z,QDialog:P.Z,QCardSection:z.Z,QSpace:V.Z,QForm:D.Z,QInput:T.Z}),E()(Z,"directives",{ClosePopup:S.Z});var U=a(4987),A=a(9017);const R={name:"IndexPage",data(){return{parties:null,heigth:"",shadowText:"Rechercher une partie ( code )",cherche:""}},components:{PartyCard:J},async mounted(){this.height=(0,j.$E)()-190,await this.refresh();let e=await(0,A.IO)((0,A.hJ)(U["default"].firebasebd,"party"));(0,A.cf)(e,(e=>{e.docChanges().forEach((async e=>{"added"===e.type&&await this.refresh(),"modified"===e.type&&await this.refresh(),"removed"===e.type&&await this.refresh()}))}))},methods:{async refresh(){this.partie=null;let e=await this.$store.dispatch("getAllParty");this.parties=e}}};var B=a(9885),F=a(8144),H=a(7501),M=a(627);const O=(0,k.Z)(R,[["render",c]]),Y=O;E()(R,"components",{QPage:B.Z,QForm:D.Z,QInput:T.Z,QBtn:C.Z,QScrollArea:F.Z,QSpinnerDots:H.Z,QPageSticky:M.Z})}}]);