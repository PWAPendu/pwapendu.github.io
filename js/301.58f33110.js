"use strict";(globalThis["webpackChunkpwa_pendu"]=globalThis["webpackChunkpwa_pendu"]||[]).push([[301],{9279:(e,t,a)=>{a.d(t,{Z:()=>z});var s=a(9835),r=a(6970);const i={class:"q-pa-md row items-center justify-around"},o={class:"col"},n={class:"text-bold text-h6 q-ma-none q-pa-none"},l={class:"col-4"},d={style:{"font-size":"18px"},class:"text-grey q-ma-none q-pa-none"},p={class:"col"},u={class:"text-bold q-pa-none q-ma-none"},c={class:"text-grey"},m=(0,s._)("div",{class:"text-h6"},"Entrez le mot de passe",-1),h={class:"row justify-center"};function w(e,t,a,w,y,g){const f=(0,s.up)("q-btn"),q=(0,s.up)("q-card"),x=(0,s.up)("q-space"),b=(0,s.up)("q-card-section"),_=(0,s.up)("q-input"),v=(0,s.up)("q-form"),Z=(0,s.up)("q-dialog"),j=(0,s.Q2)("close-popup");return(0,s.wg)(),(0,s.iD)(s.HY,null,[a.partie?((0,s.wg)(),(0,s.j4)(q,{key:0,class:"shadow-5 q-pa-md",style:{"border-radius":"15px"}},{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",o,[(0,s._)("p",n,(0,r.zw)(a.partie.nom),1)]),(0,s._)("div",l,[(0,s._)("p",d,(0,r.zw)(a.partie.statut),1)]),(0,s._)("div",p,[(0,s.Wm)(f,{disable:"En attente"!=a.partie.statut,loading:y.loading,onClick:g.join,color:"primary",label:"Joindre","no-caps":"",size:"16px",style:{width:"100%","border-radius":"15px"}},null,8,["disable","loading","onClick"])])]),(0,s._)("p",u,[(0,s._)("span",c,"#"+(0,r.zw)("En attente"!=a.partie.statut?"########":a.partie.code),1),(0,s.Uk)(" - "+(0,r.zw)(a.partie.joueurs.length)+"/"+(0,r.zw)(a.partie.max)+" joueur(s) ",1)])])),_:1})):(0,s.kq)("",!0),(0,s.Wm)(Z,{persistent:"","full-width":"",modelValue:y.mdp,"onUpdate:modelValue":t[1]||(t[1]=e=>y.mdp=e)},{default:(0,s.w5)((()=>[(0,s.Wm)(q,null,{default:(0,s.w5)((()=>[(0,s.Wm)(b,{class:"row items-center q-pb-none"},{default:(0,s.w5)((()=>[m,(0,s.Wm)(x),(0,s.wy)((0,s.Wm)(f,{icon:"close",flat:"",round:"",dense:""},null,512),[[j]])])),_:1}),(0,s.Wm)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(v,{onSubmit:g.jointMdp},{default:(0,s.w5)((()=>[(0,s.Wm)(_,{modelValue:y.mdpText,"onUpdate:modelValue":t[0]||(t[0]=e=>y.mdpText=e),type:"password",class:"q-ma-md"},null,8,["modelValue"]),(0,s._)("div",h,[(0,s.Wm)(f,{flat:"",color:"primary",type:"submit",label:"Valider"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var y=a(7431),g=a(9302);const f={props:{partie:{type:Object}},data(){return{mdp:!1,loading:!1,utils:(0,g.Z)(),mdpText:""}},methods:{async join(){this.loading=!0;let e=this.partie;if(""!=e.mdp)this.mdp=!0;else{let t=(0,y.PR)(),a=t.user,s={pseudo:a.pseudo,uid:t.auth.user.uid,avatar:a.avatar,score:0};e.joueurs<e.max?(e.joueurs.push(s),this.$router.push({name:"attenteJoueur",params:{code:this.partie.code}}),await this.$store.dispatch("editParty",{partie:e})):(0,y.h4)("Cette partie est pleinne","warning","error"),this.loading=!1}this.loading=!1},async jointMdp(){if(this.mdpText==this.partie.mdp){let e=this.partie;this.mdp=!1;let t=(0,y.PR)(),a=t.user,s={pseudo:a.pseudo,uid:t.auth.user.uid,avatar:a.avatar,score:0};e.joueurs<e.max?(e.joueurs.push(s),this.$router.push({name:"attenteJoueur",params:{code:this.partie.code}}),await this.$store.dispatch("editParty",{partie:e})):(0,y.h4)("Cette partie est pleinne","warning","error")}this.mdp=!1,this.loading=!1}}};var q=a(1639),x=a(4458),b=a(4455),_=a(3706),v=a(3190),Z=a(136),j=a(8326),W=a(6611),k=a(2146),Q=a(9984),C=a.n(Q);const P=(0,q.Z)(f,[["render",w]]),z=P;C()(f,"components",{QCard:x.Z,QBtn:b.Z,QDialog:_.Z,QCardSection:v.Z,QSpace:Z.Z,QForm:j.Z,QInput:W.Z}),C()(f,"directives",{ClosePopup:k.Z})},6301:(e,t,a)=>{a.r(t),a.d(t,{default:()=>C});var s=a(9835),r=a(6970);const i={class:"row justify-center items-center q-mb-sm q-mt-sm"},o={class:"col"},n={key:0},l={key:0},d=(0,s._)("p",{class:"text-center text-bold text-grey q-mt-lg"}," Aucune partie(s) n'est acutuellement disponible ",-1),p=[d],u={key:1,class:"row justify-center items-center q-mt-xl"};function c(e,t,a,d,c,m){const h=(0,s.up)("q-btn"),w=(0,s.up)("q-input"),y=(0,s.up)("q-form"),g=(0,s.up)("PartyCard"),f=(0,s.up)("q-scroll-area"),q=(0,s.up)("q-spinner-dots"),x=(0,s.up)("q-page-sticky"),b=(0,s.up)("q-page");return(0,s.wg)(),(0,s.j4)(b,null,{default:(0,s.w5)((()=>[(0,s.Wm)(y,null,{default:(0,s.w5)((()=>[(0,s._)("div",i,[(0,s._)("div",o,[(0,s.Wm)(w,{modelValue:c.cherche,"onUpdate:modelValue":t[1]||(t[1]=e=>c.cherche=e),class:"q-mr-sm q-ml-sm",outlined:"",rounded:"",placeholder:c.shadowText},{append:(0,s.w5)((()=>[(0,s.Wm)(h,{onClick:t[0]||(t[0]=e=>m.search(c.cherche)),type:"submit",size:"20px",color:"primary",round:"",dense:"",flat:"",icon:"search"})])),_:1},8,["modelValue","placeholder"])])])])),_:1}),c.parties?((0,s.wg)(),(0,s.iD)("div",n,[0==c.parties.length?((0,s.wg)(),(0,s.iD)("div",l,p)):(0,s.kq)("",!0),(0,s.Wm)(f,{style:(0,r.j5)("height:"+e.height+"px")},{default:(0,s.w5)((()=>[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.parties,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"q-ma-md",key:t},[(0,s.Wm)(g,{partie:e},null,8,["partie"])])))),128))])),_:1},8,["style"])])):((0,s.wg)(),(0,s.iD)("div",u,[(0,s.Wm)(q,{color:"accent",size:"50px"})])),(0,s.Wm)(x,{position:"bottom-right",offset:[18,18]},{default:(0,s.w5)((()=>[(0,s.Wm)(h,{to:{name:"createParty"},round:"",color:"secondary",icon:"add",size:"25px"})])),_:1})])),_:1})}var m=a(9279),h=a(7431),w=a(4987),y=a(9017);const g={name:"IndexPage",data(){return{parties:null,heigth:"",shadowText:"Rechercher une partie ( code )",cherche:""}},components:{PartyCard:m.Z},async mounted(){this.height=(0,h.$E)()-190,await this.refresh();let e=await(0,y.IO)((0,y.hJ)(w["default"].firebasebd,"party"));(0,y.cf)(e,(e=>{e.docChanges().forEach((async e=>{"added"===e.type&&await this.refresh(),"modified"===e.type&&await this.refresh(),"removed"===e.type&&await this.refresh()}))}))},methods:{async refresh(){this.partie=null;let e=await this.$store.dispatch("getAllParty");this.parties=e},search(e){e=e.trim(),this.$router.push({name:"search",params:{code:e}})}}};var f=a(1639),q=a(9885),x=a(8326),b=a(6611),_=a(4455),v=a(8144),Z=a(7501),j=a(627),W=a(9984),k=a.n(W);const Q=(0,f.Z)(g,[["render",c]]),C=Q;k()(g,"components",{QPage:q.Z,QForm:x.Z,QInput:b.Z,QBtn:_.Z,QScrollArea:v.Z,QSpinnerDots:Z.Z,QPageSticky:j.Z})}}]);